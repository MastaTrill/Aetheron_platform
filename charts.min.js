console.log("üìä Charts.js loading...");let priceChart=null,volumeChart=null,stakingChart=null,tvlChart=null,chartData={timestamps:[],prices:[],volumes:[],tvl:[],stakingMetrics:{totalStaked:[],rewardBalance:[],stakingPercentage:[]}},chartConfig={maxDataPoints:100,updateInterval:3e4,timeframes:{"1H":60,"24H":1440,"7D":10080,"30D":43200},currentTimeframe:"24H"},chartStyles={backgroundColor:"rgba(139, 92, 246, 0.1)",borderColor:"rgba(139, 92, 246, 1)",pointBackgroundColor:"rgba(139, 92, 246, 1)",pointBorderColor:"#fff",borderWidth:2,pointRadius:3,pointHoverRadius:5,tension:.4,fill:!0},chartOptions={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,labels:{color:"#fff",font:{size:12,family:"'Inter', sans-serif"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(139, 92, 246, 1)",borderWidth:1,padding:12,displayColors:!1,callbacks:{label:function(t){let a=t.dataset.label||"";return a&&(a+=": "),null!==t.parsed.y&&(a+=t.parsed.y.toLocaleString()),a}}}},scales:{x:{display:!0,grid:{color:"rgba(255, 255, 255, 0.1)",drawBorder:!1},ticks:{color:"#999",maxRotation:0,autoSkipPadding:20}},y:{display:!0,grid:{color:"rgba(255, 255, 255, 0.1)",drawBorder:!1},ticks:{color:"#999",callback:function(t){return t.toLocaleString()}}}}};function initPriceChart(){var t=document.getElementById("priceChart");t?(console.log("üìà Initializing price chart..."),priceChart=new Chart(t,{type:"line",data:{labels:chartData.timestamps,datasets:[{label:"AETH Price (USD)",data:chartData.prices,...chartStyles}]},options:{...chartOptions,plugins:{...chartOptions.plugins,title:{display:!0,text:"AETH Price History",color:"#fff",font:{size:16,weight:"bold"}}},scales:{...chartOptions.scales,y:{...chartOptions.scales.y,ticks:{...chartOptions.scales.y.ticks,callback:function(t){return"$"+t.toFixed(6)}}}}}}),console.log("‚úÖ Price chart initialized")):console.warn("‚ö†Ô∏è Price chart canvas not found")}function initVolumeChart(){var t=document.getElementById("volumeChart");t?(console.log("üìä Initializing volume chart..."),volumeChart=new Chart(t,{type:"bar",data:{labels:chartData.timestamps,datasets:[{label:"24h Volume (USD)",data:chartData.volumes,backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},options:{...chartOptions,plugins:{...chartOptions.plugins,title:{display:!0,text:"Trading Volume",color:"#fff",font:{size:16,weight:"bold"}}},scales:{...chartOptions.scales,y:{...chartOptions.scales.y,ticks:{...chartOptions.scales.y.ticks,callback:function(t){return 1e6<=t?"$"+(t/1e6).toFixed(2)+"M":1e3<=t?"$"+(t/1e3).toFixed(2)+"K":"$"+t.toFixed(2)}}}}}}),console.log("‚úÖ Volume chart initialized")):console.warn("‚ö†Ô∏è Volume chart canvas not found")}function initTVLChart(){var t=document.getElementById("tvlChart");t?(console.log("üí∞ Initializing TVL chart..."),tvlChart=new Chart(t,{type:"line",data:{labels:chartData.timestamps,datasets:[{label:"Total Value Locked (USD)",data:chartData.tvl,backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",pointBackgroundColor:"rgba(59, 130, 246, 1)",pointBorderColor:"#fff",borderWidth:2,pointRadius:3,tension:.4,fill:!0}]},options:{...chartOptions,plugins:{...chartOptions.plugins,title:{display:!0,text:"Total Value Locked",color:"#fff",font:{size:16,weight:"bold"}}},scales:{...chartOptions.scales,y:{...chartOptions.scales.y,ticks:{...chartOptions.scales.y.ticks,callback:function(t){return 1e6<=t?"$"+(t/1e6).toFixed(2)+"M":1e3<=t?"$"+(t/1e3).toFixed(2)+"K":"$"+t.toFixed(2)}}}}}}),console.log("‚úÖ TVL chart initialized")):console.warn("‚ö†Ô∏è TVL chart canvas not found")}function initStakingChart(){var t=document.getElementById("stakingChart");t?(console.log("üéØ Initializing staking chart..."),stakingChart=new Chart(t,{type:"line",data:{labels:chartData.timestamps,datasets:[{label:"Total Staked (AETH)",data:chartData.stakingMetrics.totalStaked,backgroundColor:"rgba(168, 85, 247, 0.1)",borderColor:"rgba(168, 85, 247, 1)",pointBackgroundColor:"rgba(168, 85, 247, 1)",borderWidth:2,pointRadius:3,tension:.4,fill:!0,yAxisID:"y"},{label:"Staking %",data:chartData.stakingMetrics.stakingPercentage,backgroundColor:"rgba(234, 179, 8, 0.1)",borderColor:"rgba(234, 179, 8, 1)",pointBackgroundColor:"rgba(234, 179, 8, 1)",borderWidth:2,pointRadius:3,tension:.4,fill:!0,yAxisID:"y1"}]},options:{...chartOptions,plugins:{...chartOptions.plugins,title:{display:!0,text:"Staking Metrics",color:"#fff",font:{size:16,weight:"bold"}}},scales:{x:{...chartOptions.scales.x},y:{type:"linear",display:!0,position:"left",grid:{color:"rgba(255, 255, 255, 0.1)",drawBorder:!1},ticks:{color:"#999",callback:function(t){return 1e6<=t?(t/1e6).toFixed(1)+"M":1e3<=t?(t/1e3).toFixed(1)+"K":t.toFixed(0)}}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1,drawBorder:!1},ticks:{color:"#999",callback:function(t){return t.toFixed(1)+"%"}}}}}}),console.log("‚úÖ Staking chart initialized")):console.warn("‚ö†Ô∏è Staking chart canvas not found")}async function updateChartData(){try{console.log("üîÑ Updating chart data...");var o=(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});let t=0,a=0,e=0;try{var n=await(await fetch("https://api.dexscreener.com/latest/dex/pairs/polygon/0xd57c5E33ebDC1b565F99d06809debbf86142705D")).json();n.pair&&(t=parseFloat(n.pair.priceUsd)||0,a=parseFloat(n.pair.volume?.h24)||0,e=parseFloat(n.pair.liquidity?.usd)||0)}catch(t){console.error("‚ùå Error fetching market data:",t)}let r=0,i=0;if(window.readOnlyAethContract&&window.readOnlyStakingContract)try{var l=await window.readOnlyAethContract.totalSupply(),s=await window.readOnlyStakingContract.totalStaked();r=parseFloat(ethers.utils.formatEther(s)),i=r/parseFloat(ethers.utils.formatEther(l))*100}catch(t){console.error("‚ùå Error fetching staking data:",t)}chartData.timestamps.push(o),chartData.prices.push(t),chartData.volumes.push(a),chartData.tvl.push(e),chartData.stakingMetrics.totalStaked.push(r),chartData.stakingMetrics.stakingPercentage.push(i);var c=chartConfig.maxDataPoints;chartData.timestamps.length>c&&(chartData.timestamps=chartData.timestamps.slice(-c),chartData.prices=chartData.prices.slice(-c),chartData.volumes=chartData.volumes.slice(-c),chartData.tvl=chartData.tvl.slice(-c),chartData.stakingMetrics.totalStaked=chartData.stakingMetrics.totalStaked.slice(-c),chartData.stakingMetrics.stakingPercentage=chartData.stakingMetrics.stakingPercentage.slice(-c)),updateAllCharts(),console.log("‚úÖ Chart data updated:",{price:t.toFixed(6),volume:a.toFixed(2),tvl:e.toFixed(2),totalStaked:r.toFixed(0),stakingPercentage:i.toFixed(2)+"%"})}catch(t){console.error("‚ùå Error updating chart data:",t)}}function updateAllCharts(){priceChart&&(priceChart.data.labels=chartData.timestamps,priceChart.data.datasets[0].data=chartData.prices,priceChart.update("none")),volumeChart&&(volumeChart.data.labels=chartData.timestamps,volumeChart.data.datasets[0].data=chartData.volumes,volumeChart.update("none")),tvlChart&&(tvlChart.data.labels=chartData.timestamps,tvlChart.data.datasets[0].data=chartData.tvl,tvlChart.update("none")),stakingChart&&(stakingChart.data.labels=chartData.timestamps,stakingChart.data.datasets[0].data=chartData.stakingMetrics.totalStaked,stakingChart.data.datasets[1].data=chartData.stakingMetrics.stakingPercentage,stakingChart.update("none"))}function initializeCharts(){console.log("üéØ Initializing all charts..."),initPriceChart(),initVolumeChart(),initTVLChart(),initStakingChart(),updateChartData(),setInterval(updateChartData,chartConfig.updateInterval),console.log("‚úÖ All charts initialized and auto-update started")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initializeCharts):initializeCharts(),window.AetheronCharts={init:initializeCharts,update:updateChartData,data:chartData,config:chartConfig},console.log("‚úÖ Charts.js loaded successfully");