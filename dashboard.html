</div>
/* Universal Reset and Touch Improvements */
* { margin: 0; padding: 0; box-sizing: border-box; }
html { touch-action: manipulation; -webkit-tap-highlight-color: rgba(0, 212, 255, 0.3); }
button, a, input, select, textarea { touch-action: manipulation; -webkit-tap-highlight-color: rgba(0, 212, 255, 0.3); }

/* Theme Variables */
:root {
--primary: #00D4FF;
--secondary: #8A2BE2;
--accent: #FF6B35;
--success: #10b981;
--danger: #ef4444;
--warning: #f59e0b;
--dark: #0a0a0a;
--light: #1a1a2e;
--text: #ffffff;
--card-bg: rgba(26, 26, 46, 0.8);
--bg-gradient-start: #0a0a0a;
--bg-gradient-mid: #1a1a2e;
--bg-gradient-end: #16213e;
}

[data-theme="light"] {
--primary: #0099cc;
--secondary: #6b21a8;
--accent: #ea580c;
--success: #059669;
--danger: #dc2626;
--warning: #d97706;
--dark: #f8fafc;
--light: #e2e8f0;
--text: #1e293b;
--card-bg: rgba(255, 255, 255, 0.9);
--bg-gradient-start: #f1f5f9;
--bg-gradient-mid: #e2e8f0;
--bg-gradient-end: #cbd5e1;
}

/* Modern Background and Starfield */
body {
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
background: radial-gradient(ellipse at center, var(--bg-gradient-start) 0%, var(--bg-gradient-mid) 50%,
var(--bg-gradient-end) 100%);
color: var(--text);
min-height: 100vh;
transition: background 0.3s, color 0.3s;
overflow-x: hidden;
position: relative;
}

body::before {
content: '';
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-image: radial-gradient(2px 2px at 20px 30px, #eee, transparent), radial-gradient(2px 2px at 40px 70px, #fff,
transparent), radial-gradient(1px 1px at 90px 40px, #eee, transparent), radial-gradient(1px 1px at 130px 80px, #fff,
transparent), radial-gradient(2px 2px at 160px 30px, #ddd, transparent);
background-repeat: repeat;
background-size: 200px 100px;
animation: twinkle 4s ease-in-out infinite alternate;
z-index: -1;
}

@keyframes twinkle {
0% { filter: brightness(0.3); }
100% { filter: brightness(0.8); }
}

.container {
max-width: 1200px;
margin: 0 auto;
}

.theme-toggle-btn {
float: right;
margin-top: -40px;
margin-right: 10px;
background: var(--card-bg);
color: var(--primary);
border: 1px solid var(--border-main);
border-radius: 50%;
width: 40px;
height: 40px;
font-size: 1.3em;
cursor: pointer;
box-shadow: var(--shadow-main);
transition: background 0.2s, color 0.2s;
}

.theme-toggle-btn:hover {
background: var(--primary);
color: #fff;
}

.header {
background: rgba(26, 26, 46, .9);
-webkit-backdrop-filter: blur(10px);
backdrop-filter: blur(10px);
border: 1px solid rgba(0, 212, 255, .3);
padding: 30px;
border-radius: 20px;
margin-bottom: 30px;
box-shadow: 0 0 40px rgba(0, 212, 255, .1);
}

.header h1 {
color: #00d4ff;
font-size: 2.5em;
margin-bottom: 10px;
}

.logo {
background: linear-gradient(135deg, var(--primary), var(--accent));
-webkit-background-clip: text;
background-clip: text;
-webkit-text-fill-color: transparent;
}

.header p {
color: #fff;
font-size: 1.1em;
}

.wallet-section {
background: rgba(26, 26, 46, .9);
-webkit-backdrop-filter: blur(10px);
backdrop-filter: blur(10px);
border: 1px solid rgba(0, 212, 255, .2);
padding: 25px;
border-radius: 15px;
box-shadow: 0 0 30px rgba(0, 212, 255, .1);
margin-bottom: 30px;
}

.connect-btn {
background: linear-gradient(135deg, #667eea 0, #764ba2 100%);
color: #fff;
border: none;
padding: 15px 40px;
border-radius: 10px;
font-size: 1.1em;
cursor: pointer;
transition: transform .2s;
}

.connect-btn:hover {
transform: translateY(-2px);
}

.connected {
background: #4caf50;
}

.wallet-info {
margin-top: 20px;
display: none;
}

.wallet-info.active {
display: block;
}

.info-row {
display: flex;
justify-content: space-between;
padding: 15px;
background: rgba(0, 212, 255, .1);
margin: 10px 0;
border-radius: 8px;
border: 1px solid rgba(0, 212, 255, .2);
}

.info-label {
font-weight: 700;
color: #00d4ff;
}

.info-value {
color: #fff;
font-family: monospace;
}

.cards-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 20px;
margin-bottom: 30px;
}

.card {
background: rgba(26, 26, 46, .9);
-webkit-backdrop-filter: blur(10px);
backdrop-filter: blur(10px);
border: 1px solid rgba(0, 212, 255, .2);
padding: 25px;
border-radius: 15px;
box-shadow: 0 0 30px rgba(0, 212, 255, .1);
transition: transform .3s ease;
}

.card:hover {
transform: translateY(-5px);
}

.card h2 {
color: #00d4ff;
margin-bottom: 20px;
font-size: 1.5em;
}

.input-group {
margin: 15px 0;
}

.input-group label {
display: block;
margin-bottom: 8px;
color: #666;
font-weight: 500;
}

.input-group input {
width: 100%;
padding: 12px;
border: 2px solid #e0e0e0;
border-radius: 8px;
font-size: 1em;
}

.action-btn {
background: linear-gradient(135deg, #00d4ff, #8a2be2);
color: #fff;
border: none;
padding: 12px 30px;
border-radius: 8px;
cursor: pointer;
margin-top: 15px;
width: 100%;
font-size: 1em;
transition: background .3s;
}

.action-btn:hover {
background: linear-gradient(135deg, #ff6b35, #00d4ff);
}

.status-message {
margin-top: 15px;
padding: 12px;
border-radius: 8px;
display: none;
}

.status-message.success {
background: rgba(16, 185, 129, .2);
color: #10b981;
border: 1px solid #10b981;
display: block;
}

.status-message.error {
background: rgba(239, 68, 68, .2);
color: #ef4444;
border: 1px solid #ef4444;
display: block;
}

.pools-list {
margin-top: 20px;
}

.pool-item {
background: rgba(0, 212, 255, .1);
padding: 15px;
margin: 10px 0;
border-radius: 8px;
border-left: 4px solid #00d4ff;
}

.pool-item h3 {
color: #00d4ff;
margin-bottom: 10px;
}

.pool-details {
display: flex;
justify-content: space-between;
color: #fff;
font-size: .95em;
}

.font-08 {
font-size: .8em;
}

.buy-btn {
margin-left: 10px;
}
</style>
<link rel="stylesheet" href="shared-mobile-polish.css?v=1.3.0">
</head>
<link rel="stylesheet" href="shared-mobile-polish.css?v=1.3.0">
</head>

<body>
  <div class="container">
    <!-- Loading Spinner -->
    <div id="globalLoading" class="loading global-loading-bg">
      <div class="global-loading-center">
        <svg width="60" height="60" viewBox="0 0 50 50">
          <circle cx="25" cy="25" r="20" fill="none" stroke="#00d4ff" stroke-width="5" stroke-linecap="round"
            stroke-dasharray="31.4 31.4" transform="rotate(-90 25 25)">
            <animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="1s"
              repeatCount="indefinite" />
          </circle>
        </svg>
        <div class="global-loading-text">Loading...</div>
      </div>
    </div>
    <div class="header">
      <h1 class="logo">üåå Aetheron Platform</h1>
      <p>Decentralized Token & Staking Platform</p>
      <button id="themeToggleBtn" class="theme-toggle-btn" aria-label="Toggle dark/light mode">üåô</button>
    </div>
    <div class="wallet-section">
      <button id="connectBtn" type="button" class="connect-btn" aria-label="Connect Wallet">Connect Wallet</button>
      <button type="button" class="connect-btn buy-btn"
        onclick='window.open("https://quickswap.exchange/#/swap?outputCurrency=0xAb5ae0D8f569d7c2B27574319b864a5bA6F9671e","_blank")'
        aria-label="Buy AETH"><i class="fas fa-shopping-cart"></i> Buy AETH</button>
      <button type="button" class="connect-btn buy-btn coinbase-btn" onclick="payWithCoinbase()"
        aria-label="Pay with Crypto (Coinbase)">Pay with Crypto (Coinbase)</button>
      <button id="refreshBalancesBtn" type="button" class="connect-btn buy-btn refresh-btn"
        aria-label="Refresh Balances">üîÑ Refresh</button>
      <div id="walletInfo" class="wallet-info">
        <div class="info-row"><span class="info-label">Wallet Type:</span> <span class="info-value"
            id="walletType">-</span></div>
        <div class="info-row"><span class="info-label">Connected Account:</span> <span class="info-value"
            id="accountAddress">-</span>
          <button id="copyAccountBtn" class="action-btn copy-account-btn" aria-label="Copy Account Address">üìã</button>
        </div>
        <div class="info-row"><span class="info-label">Network:</span> <span class="info-value" id="networkName">Polygon
            Mainnet</span></div>
        <div class="info-row"><span class="info-label">MATIC Balance:</span> <span class="info-value" id="ethBalance">0
            MATIC</span></div>
        <div class="info-row"><span class="info-label">AETH Balance:</span> <span class="info-value" id="aethBalance">0
            AETH</span></div>
      </div>
    </div>
    <div class="cards-grid">
      <div class="card">
        <h2>üí∞ Transfer AETH</h2>
        <div class="input-group"><label>Recipient Address:</label> <input type="text" id="transferTo"
            placeholder="0x..."></div>
        <div class="input-group"><label>Amount (AETH):</label> <input type="number" id="transferAmount"
            placeholder="100"></div><button type="button" class="action-btn"
          onclick="transferTokens()">Transfer</button>
        <div id="transferStatus" class="status-message"></div>
      </div>
      <div class="card">
        <h2>üéØ Stake AETH</h2>
        <div class="input-group"><label>Pool ID:</label> <input type="number" id="poolId" placeholder="0, 1, or 2"
            value="0"></div>
        <div class="input-group"><label>Amount (AETH):</label> <input type="number" id="stakeAmount" placeholder="1000">
        </div><button type="button" class="action-btn" onclick="stakeTokens()">Stake</button>
        <div id="stakeStatus" class="status-message"></div>
        <div class="pools-list">
          <div class="pool-item">
            <h3>Pool 0: Short Term</h3>
            <div class="pool-details"><span>Lock: 30 days</span> <span>APY: 5%</span></div>
          </div>
          <div class="pool-item">
            <h3>Pool 1: Medium Term</h3>
            <div class="pool-details"><span>Lock: 90 days</span> <span>APY: 12%</span></div>
          </div>
          <div class="pool-item">
            <h3>Pool 2: Long Term</h3>
            <div class="pool-details"><span>Lock: 180 days</span> <span>APY: 25%</span></div>
          </div>
        </div>
      </div>
      <div class="card">
        <h2>üìä Contract Info</h2>
        <div class="info-row"><span class="info-label">AETH Token:</span> <span
            class="info-value font-08">0xAb5ae0D8f569d7c2B27574319b864a5bA6F9671e</span></div>
        <div class="info-row"><span class="info-label">Staking:</span> <span
            class="info-value font-08">0x896D9d37A67B0bBf81dde0005975DA7850FFa638</span></div>
        <div class="info-row"><span class="info-label">Network:</span> <span class="info-value">Polygon Mainnet</span>
        </div>
        <div class="info-row"><span class="info-label">Chain ID:</span> <span class="info-value">137</span></div>
        <div class="info-row"><span class="info-label">Explorer:</span> <span class="info-value"><a
              href="https://polygonscan.com/token/0xAb5ae0D8f569d7c2B27574319b864a5bA6F9671e" target="_blank"
              rel="noopener noreferrer">View on PolygonScan</a></span></div>
      </div>
      <div class="card payment-history-card">
        <h2 class="payment-history-title">Payment History</h2>
        <div class="payment-history-table-wrap">
          <table class="payment-history-table">
            <thead>
              <tr class="payment-history-header-row">
                <th>Date</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Receipt</th>
                <th>Gateway</th>
              </tr>
            </thead>
            <tbody id="paymentHistoryTableBody">
              <tr>
                <td colspan="5">Loading...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- Analytics/Engagement Chart Card -->
      <div class="card" id="analyticsCard">
        <h2>üìà Engagement Analytics</h2>
        <canvas id="engagementChart"
          style="width:100%;max-width:600px;min-height:260px;background:rgba(0,0,0,0.02);border-radius:10px;"></canvas>
      </div>
      <!-- User Profile Section -->
      <div class="card" id="userProfileCard" style="max-width:420px;margin:0 auto 24px auto;">
        <h2>üë§ User Profile</h2>
        <div style="display:flex;align-items:center;gap:1rem;">
          <div id="profileAvatar"
            style="width:56px;height:56px;border-radius:50%;background:#eee;display:flex;align-items:center;justify-content:center;font-size:2em;">
            üßë</div>
          <div>
            <div id="profileName" style="font-weight:600;">Guest</div>
            <div id="profileEmail" style="font-size:0.95em;color:#888;">Not signed in</div>
          </div>
        </div>
        <button id="editProfileBtn" class="action-btn" style="margin-top:18px;">Edit Profile</button>
      </div>
      <!-- Onboarding Tour Button -->
      <button id="onboardingBtn" class="action-btn" style="position:fixed;bottom:1.5rem;left:1.5rem;z-index:1200;">‚ùì
        Tour</button>
    </div>
  </div>
  <!-- Payment Status Modal -->
  <div id="paymentStatusModal" class="payment-status-modal-bg">
    <div class="payment-status-modal">
      <div id="paymentStatusIcon" class="payment-status-icon">üí∏</div>
      <div id="paymentStatusText" class="payment-status-text">Processing payment...</div>
      <button onclick="closePaymentStatusModal()" class="payment-status-close-btn">Close</button>
    </div>
  </div>
  <script>
    // --- Dark/Light Mode Toggle ---
    function setTheme(theme) {
      document.body.setAttribute('data-theme', theme);
      localStorage.setItem('dashboard-theme', theme);
      const btn = document.getElementById('themeToggleBtn');
      if (btn) btn.textContent = theme === 'light' ? '‚òÄÔ∏è' : 'üåô';
    }
    function toggleTheme() {
      const current = document.body.getAttribute('data-theme') || 'dark';
      setTheme(current === 'dark' ? 'light' : 'dark');
    }
    window.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('dashboard-theme') || 'dark';
      setTheme(saved);
      const btn = document.getElementById('themeToggleBtn');
      if (btn) btn.addEventListener('click', toggleTheme);
    });
    // --- Dashboard UI/UX Improvements ---
    const AETH_ADDRESS = "0xAb5ae0D8f569d7c2B27574319b864a5bA6F9671e", STAKING_ADDRESS = "0x896D9d37A67B0bBf81dde0005975DA7850FFa638", AETH_ABI = ["function balanceOf(address) view returns (uint256)", "function transfer(address to, uint256 amount) returns (bool)", "function approve(address spender, uint256 amount) returns (bool)", "function decimals() view returns (uint8)"], STAKING_ABI = ["function stake(uint256 poolId, uint256 amount)", "function pools(uint256) view returns (uint256, uint256, uint256, bool)"];
    let provider, signer, account, aethContract, stakingContract, walletType = "Unknown";
    const POLYGON_CHAIN_ID = "0x89", POLYGON_PARAMS = { chainId: "0x89", chainName: "Polygon Mainnet", nativeCurrency: { name: "MATIC", symbol: "MATIC", decimals: 18 }, rpcUrls: ["https://polygon-rpc.com/"], blockExplorerUrls: ["https://polygonscan.com/"] };

    function showGlobalLoading(show) {
      const spinner = document.getElementById("globalLoading");
      if (spinner) spinner.style.display = show ? "flex" : "none";
    }

    function getWalletProvider() { /* ...existing code... */ return null }
    function setupWalletListeners(e) { /* ...existing code... */ }
    function checkWallet() { /* ...existing code... */ }
    async function connectWallet() { /* ...existing code... */ }
    async function switchToPolygon(e) { /* ...existing code... */ }
    function disconnectWallet() { /* ...existing code... */ }
    async function updateBalances() {
      showGlobalLoading(true);
      if (provider && account) try {
        const e = await provider.getBalance(account);
        document.getElementById("ethBalance").textContent = parseFloat(ethers.utils.formatEther(e)).toFixed(4) + " MATIC";
        const t = await aethContract.balanceOf(account);
        document.getElementById("aethBalance").textContent = parseFloat(ethers.utils.formatEther(t)).toFixed(2) + " AETH";
      } catch (e) {
        console.error("Error updating balances:", e)
      }
      showGlobalLoading(false);
    }
    async function transferTokens() { /* ...existing code... */ }
    async function stakeTokens() { /* ...existing code... */ }
    window.addEventListener("load", async () => {
      const e = getWalletProvider();
      checkWallet(), e && e.selectedAddress && await connectWallet();
      // Add refresh button handler
      const refreshBtn = document.getElementById("refreshBalancesBtn");
      if (refreshBtn) refreshBtn.addEventListener("click", updateBalances);
      // Copy account address
      const copyBtn = document.getElementById("copyAccountBtn");
      if (copyBtn) copyBtn.addEventListener("click", () => {
        const addr = document.getElementById("accountAddress").textContent;
        if (addr && addr !== "-") {
          navigator.clipboard.writeText(addr.replace(/\.\.\./, ''));
          copyBtn.textContent = "‚úÖ";
          setTimeout(() => { copyBtn.textContent = "üìã"; }, 1200);
        }
      });
    });
    document.getElementById("connectBtn").addEventListener("click", connectWallet);
  </script>
  <script src="global-announcements.js"></script>
  <script src="coinbase-commerce-frontend.js"></script>
  <script src="payment-history.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // --- Analytics/Engagement Chart ---
    window.addEventListener('DOMContentLoaded', () => {
      const ctx = document.getElementById('engagementChart');
      if (ctx && window.Chart) {
        const chart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
              label: 'Active Users',
              data: [12, 19, 14, 17, 23, 20, 25],
              fill: true,
              backgroundColor: 'rgba(0,212,255,0.12)',
              borderColor: 'rgba(0,212,255,1)',
              tension: 0.4,
              pointBackgroundColor: 'var(--accent)',
              pointRadius: 5,
              borderWidth: 3
            }]
          },
          options: {
            plugins: {
              legend: { labels: { color: getComputedStyle(document.body).getPropertyValue('--primary') || '#00d4ff' } }
            },
            scales: {
              x: { ticks: { color: getComputedStyle(document.body).getPropertyValue('--text-main') || '#fff' } },
              y: { ticks: { color: getComputedStyle(document.body).getPropertyValue('--text-main') || '#fff' } }
            },
            responsive: true,
            maintainAspectRatio: false
          }
        });
      }
    });
  </script>
  <script>window.addEventListener('DOMContentLoaded', () => { window.renderPaymentHistory && window.renderPaymentHistory(); });</script>
  <!-- Language Selector -->
  <div style="text-align:right;margin-bottom:10px;">
    <select id="langSelect" aria-label="Select language" style="padding:4px 10px;border-radius:6px;">
      <option value="en">English</option>
      <option value="es">Espa√±ol</option>
      <option value="fr">Fran√ßais</option>
      <option value="de">Deutsch</option>
    </select>
  </div>
  <!-- Localization/i18n -->
  <script>
    const translations = {
      en: {
        title: 'Aetheron Platform',
        subtitle: 'Decentralized Token & Staking Platform',
        connect: 'Connect Wallet',
        buy: 'Buy AETH',
        pay: 'Pay with Crypto (Coinbase)',
        refresh: 'Refresh Balances',
        walletType: 'Wallet Type:',
        connectedAccount: 'Connected Account:',
        network: 'Network:',
        maticBalance: 'MATIC Balance:',
        aethBalance: 'AETH Balance:',
        transfer: 'Transfer AETH',
        recipient: 'Recipient Address:',
        amount: 'Amount (AETH):',
        transferBtn: 'Transfer',
        stake: 'Stake AETH',
        poolId: 'Pool ID:',
        stakeBtn: 'Stake',
        contractInfo: 'Contract Info',
        paymentHistory: 'Payment History',
        engagement: 'Engagement Analytics',
      },
      es: {
        title: 'Plataforma Aetheron',
        subtitle: 'Plataforma Descentralizada de Token y Staking',
        connect: 'Conectar Billetera',
        buy: 'Comprar AETH',
        pay: 'Pagar con Cripto (Coinbase)',
        refresh: 'Actualizar Saldos',
        walletType: 'Tipo de Billetera:',
        connectedAccount: 'Cuenta Conectada:',
        network: 'Red:',
        maticBalance: 'Saldo MATIC:',
        aethBalance: 'Saldo AETH:',
        transfer: 'Transferir AETH',
        recipient: 'Direcci√≥n del Destinatario:',
        amount: 'Montant (AETH):',
        transferBtn: 'Transferir',
        stake: 'Apostar AETH',
        poolId: 'Pool-ID:',
        stakeBtn: 'Apostar',
        contractInfo: 'Informaci√≥n del Contrato',
        paymentHistory: 'Historial de Pagos',
        engagement: 'Anal√≠tica de Participaci√≥n',
      },
      fr: {
        title: 'Plateforme Aetheron',
        subtitle: 'Plateforme D√©centralis√©e de Jeton & Staking',
        connect: 'Connecter le Portefeuille',
        buy: 'Acheter AETH',
        pay: 'Payer en Crypto (Coinbase)',
        refresh: 'Rafra√Æchir Soldes',
        walletType: 'Type de Portefeuille:',
        connectedAccount: 'Compte Connect√©:',
        network: 'R√©seau:',
        maticBalance: 'Solde MATIC:',
        aethBalance: 'Solde AETH:',
        transfer: 'Transf√©rer AETH',
        recipient: 'Adresse du Destinataire:',
        amount: 'Montant (AETH):',
        transferBtn: 'Transf√©rer',
        stake: 'Staker AETH',
        poolId: 'Pool-ID:',
        stakeBtn: 'Staker',
        contractInfo: 'Vertragsinfo',
        paymentHistory: 'Zahlungsverlauf',
        engagement: 'Engagement-Analyse',
      },
      de: {
        title: 'Aetheron Plattform',
        subtitle: 'Dezentrale Token- & Staking-Plattform',
        connect: 'Wallet Verbinden',
        buy: 'AETH Kaufen',
        pay: 'Mit Krypto Bezahlen (Coinbase)',
        refresh: 'Salden Aktualisieren',
        walletType: 'Wallet-Typ:',
        connectedAccount: 'Verbundenes Konto:',
        network: 'Netzwerk:',
        maticBalance: 'MATIC Kontostand:',
        aethBalance: 'AETH Kontostand:',
        transfer: 'AETH √úbertragen',
        recipient: 'Empf√§ngeradresse:',
        amount: 'Betrag (AETH):',
        transferBtn: '√úbertragen',
        stake: 'AETH Staken',
        poolId: 'Pool-ID:',
        stakeBtn: 'Staken',
        contractInfo: 'Vertragsinfo',
        paymentHistory: 'Zahlungsverlauf',
        engagement: 'Engagement-Analyse',
      }
    };
    function setLang(lang) {
      const t = translations[lang] || translations.en;
      document.querySelector('.logo').textContent = 'üåå ' + t.title;
      document.querySelector('.header p').textContent = t.subtitle;
      document.getElementById('connectBtn').textContent = t.connect;
      document.querySelector('.buy-btn').textContent = t.buy;
      document.querySelector('.coinbase-btn').textContent = t.pay;
      document.querySelector('.refresh-btn').textContent = 'üîÑ ' + t.refresh;
      document.getElementById('walletType').previousSibling.textContent = t.walletType + ' ';
      document.getElementById('accountAddress').previousSibling.textContent = t.connectedAccount + ' ';
      document.getElementById('networkName').previousSibling.textContent = t.network + ' ';
      document.getElementById('ethBalance').previousSibling.textContent = t.maticBalance + ' ';
      document.getElementById('aethBalance').previousSibling.textContent = t.aethBalance + ' ';
      document.querySelector('.card h2').textContent = 'üí∞ ' + t.transfer;
      document.getElementById('transferTo').previousSibling.textContent = t.recipient;
      document.getElementById('transferAmount').previousSibling.textContent = t.amount;
      document.querySelector('.card .action-btn').textContent = t.transferBtn;
      document.querySelectorAll('.card h2')[1].textContent = 'üéØ ' + t.stake;
      document.getElementById('poolId').previousSibling.textContent = t.poolId;
      document.getElementById('stakeAmount').previousSibling.textContent = t.amount;
      document.querySelectorAll('.card .action-btn')[1].textContent = t.stakeBtn;
      document.querySelectorAll('.card h2')[2].textContent = 'üìä ' + t.contractInfo;
      document.querySelector('.payment-history-title').textContent = t.paymentHistory;
      document.getElementById('analyticsCard').querySelector('h2').textContent = 'üìà ' + t.engagement;
    }
    document.getElementById('langSelect').addEventListener('change', e => {
      setLang(e.target.value);
      localStorage.setItem('dashboard-lang', e.target.value);
    });
    window.addEventListener('DOMContentLoaded', () => {
      const lang = localStorage.getItem('dashboard-lang') || 'en';
      document.getElementById('langSelect').value = lang;
      setLang(lang);
    });
  </script>
  <!-- Wallet/Social Login Options -->
  <div style="text-align:right;margin-bottom:10px;">
    <button id="walletConnectBtn" class="connect-btn" style="margin-right:8px;">üîó WalletConnect</button>
    <button id="googleLoginBtn" class="connect-btn" style="background:#fff;color:#222;border:1px solid #4285f4;">G <span
        style="font-weight:600;">oogle</span></button>
  </div>
  <script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    // --- WalletConnect Integration ---
    let walletConnectProvider;
    document.getElementById('walletConnectBtn').addEventListener('click', async () => {
      if (!window.WalletConnectProvider) {
        showToast('WalletConnect not loaded.', { type: 'error' });
        return;
      }
      walletConnectProvider = new window.WalletConnectProvider.default({
        rpc: { 137: 'https://polygon-rpc.com/' },
        chainId: 137
      });
      await walletConnectProvider.enable();
      provider = new ethers.providers.Web3Provider(walletConnectProvider);
      signer = provider.getSigner();
      account = (await provider.listAccounts())[0];
      document.getElementById('walletType').textContent = 'WalletConnect';
      document.getElementById('accountAddress').textContent = account;
      showToast('WalletConnect connected!', { type: 'success' });
      updateBalances();
    });
    // --- Google Social Login Integration ---
    window.handleGoogleCredential = (response) => {
      // For demo: just show a toast and fake a user
      showToast('Google login successful!', { type: 'success' });
      document.getElementById('walletType').textContent = 'Google';
      document.getElementById('accountAddress').textContent = 'user@gmail.com';
    };
    window.addEventListener('DOMContentLoaded', () => {
      if (window.google && window.google.accounts && window.google.accounts.id) {
        window.google.accounts.id.initialize({
          client_id: 'YOUR_GOOGLE_CLIENT_ID',
          callback: window.handleGoogleCredential
        });
        window.google.accounts.id.renderButton(
          document.getElementById('googleLoginBtn'),
          { theme: 'outline', size: 'large' }
        );
      } else {
        document.getElementById('googleLoginBtn').addEventListener('click', () => {
          showToast('Google login (demo only)', { type: 'success' });
          document.getElementById('walletType').textContent = 'Google';
          document.getElementById('accountAddress').textContent = 'user@gmail.com';
        });
      }
    });
  </script>
  <!-- Accessibility: ARIA landmarks and improved focus -->
  <main id="mainContent" tabindex="-1" aria-label="Dashboard main content">
    <!-- Existing content for the main dashboard -->
  </main>
  <script>
    // --- Accessibility Improvements ---
    // Focus main content on page load for screen readers
    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('mainContent')?.focus();
    });
    // Add ARIA labels to key buttons (already present in most cases)
    // Ensure toast container has aria-live and aria-atomic (already present)
    // Keyboard navigation: ensure all interactive elements are focusable
    document.querySelectorAll('button, [tabindex], select, input').forEach(el => {
      if (!el.hasAttribute('tabindex')) el.setAttribute('tabindex', '0');
    });
    // Add skip to content link for keyboard users
    if (!document.getElementById('skipToContent')) {
      const skip = document.createElement('a');
      skip.href = '#mainContent';
      skip.id = 'skipToContent';
      skip.textContent = 'Skip to main content';
      skip.style.position = 'absolute';
      skip.style.left = '0';
      skip.style.top = '0';
      skip.style.background = '#00d4ff';
      skip.style.color = '#222';
      skip.style.padding = '8px 16px';
      skip.style.zIndex = '2000';
      skip.style.transform = 'translateY(-120%)';
      skip.style.transition = 'transform 0.2s';
      skip.addEventListener('focus', () => { skip.style.transform = 'translateY(0)'; });
      skip.addEventListener('blur', () => { skip.style.transform = 'translateY(-120%)'; });
      document.body.prepend(skip);
    }
  </script>
  <!-- Onboarding Tour -->
  <script src="https://unpkg.com/driver.js/dist/driver.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/driver.js/dist/driver.min.css">
  <script>
    // --- Onboarding Tour ---
    document.getElementById('onboardingBtn').addEventListener('click', () => {
      const driver = new window.Driver({
        allowClose: true,
        animate: true,
        nextBtnText: 'Next',
        prevBtnText: 'Back',
        doneBtnText: 'Done',
        showProgress: true
      });
      driver.defineSteps([
        { element: '.logo', popover: { title: 'Welcome', description: 'This is the Aetheron dashboard.' } },
        { element: '#connectBtn', popover: { title: 'Connect Wallet', description: 'Connect your crypto wallet here.' } },
        { element: '#walletInfo', popover: { title: 'Wallet Info', description: 'See your balances and account.' } },
        { element: '#analyticsCard', popover: { title: 'Analytics', description: 'Track engagement and stats.' } },
        { element: '#userProfileCard', popover: { title: 'Profile', description: 'View and edit your user profile.' } },
        { element: '#onboardingBtn', popover: { title: 'Tour', description: 'Click here anytime for help.' } }
      ]);
      driver.start();
    });
  </script>
</body>

</html>